# üìû Smart Call Center - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
3. [Backend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#backend-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
4. [Frontend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#frontend-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
5. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
6. [API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫](#api-—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫)
7. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Asterisk](#–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è-—Å-asterisk)
8. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
10. [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](#—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

## üéØ –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Smart Call Center - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–ª–ª-—Ü–µ–Ω—Ç—Ä–æ–º —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Asterisk PBX. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–≤–æ–Ω–∫–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**: –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤, —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Asterisk**: –†–µ–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk ARI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞–º–∏
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ß–µ—Ç—ã—Ä–µ —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞ (–ê–¥–º–∏–Ω, –ú–µ–Ω–µ–¥–∂–µ—Ä, –°—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä, –û–ø–µ—Ä–∞—Ç–æ—Ä)
- **–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π Asterisk –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Frontend**: React 19, TypeScript, Tailwind CSS, shadcn/ui
- **Backend**: FastAPI (Python), Async/Await
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: MongoDB —Å Motor (async driver)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: Asterisk ARI (REST API + WebSocket)
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: JWT —Ç–æ–∫–µ–Ω—ã
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: Docker Compose

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TB
    A[–ö–ª–∏–µ–Ω—Ç –±—Ä–∞—É–∑–µ—Ä] --> B[React Frontend :3000]
    B --> C[FastAPI Backend :8001]
    C --> D[MongoDB :27017]
    C --> E[Asterisk ARI :8088]
    E --> F[Asterisk PBX]
    
    B --> G[JWT Authentication]
    C --> H[Virtual Asterisk ARI]
    
    subgraph "–í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"
        E
        F
    end
    
    subgraph "Core System"
        B
        C
        D
    end
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### Frontend Layer (React)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–°—Ç—Ä–∞–Ω–∏—Ü—ã**: Dashboard, Reports, Admin Panel, Operator Workspace
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **API Service**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ backend

#### Backend Layer (FastAPI)
- **API Routes**: RESTful endpoints –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Authentication**: JWT —Ç–æ–∫–µ–Ω—ã –∏ —Ä–æ–ª–µ–≤–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Database Layer**: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å MongoDB
- **Asterisk Integration**: ARI –∫–ª–∏–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞–º–∏
- **Virtual ARI**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –∏–º–∏—Ç–∞—Ü–∏—è Asterisk –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### Data Layer
- **MongoDB**: –û—Å–Ω–æ–≤–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Collections**: Users, Groups, Queues, Operators, Calls, Settings
- **Indexes**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üñ•Ô∏è Backend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ server.py              # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
‚îú‚îÄ‚îÄ models.py              # Pydantic –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ database.py            # –ú–µ–Ω–µ–¥–∂–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MongoDB
‚îú‚îÄ‚îÄ auth.py                # –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ JWT
‚îú‚îÄ‚îÄ asterisk_client.py     # –ö–ª–∏–µ–Ω—Ç –¥–ª—è Asterisk ARI
‚îú‚îÄ‚îÄ virtual_asterisk_ari.py # –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π Asterisk –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ db.py                  # Dependency injection –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ routes/               # API –º–∞—Ä—à—Ä—É—Ç—ã
    ‚îú‚îÄ‚îÄ auth_routes.py     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ admin_routes.py    # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ call_routes.py     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏
    ‚îú‚îÄ‚îÄ operator_routes.py # –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
    ‚îú‚îÄ‚îÄ queue_routes.py    # –û—á–µ—Ä–µ–¥–∏
    ‚îú‚îÄ‚îÄ dashboard_routes.py # Dashboard –¥–∞–Ω–Ω—ã–µ
    ‚îî‚îÄ‚îÄ asterisk_routes.py # Asterisk –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏

#### 1. server.py - –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```python
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å CORS
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–æ—É—Ç–µ—Ä–æ–≤
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ middleware
```

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `get_db()`: Dependency injection –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `initialize_default_data()`: –°–æ–∑–¥–∞–Ω–∏–µ admin –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `lifespan()`: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### 2. models.py - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
```python
# –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- User: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- Operator: –û–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å extensions
- Queue: –û—á–µ—Ä–µ–¥–∏ –∑–≤–æ–Ω–∫–æ–≤
- Call: –ó–∞–ø–∏—Å–∏ –∑–≤–æ–Ω–∫–æ–≤
- SystemSettings: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- AsteriskConfig: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Asterisk
```

**Enum –∫–ª–∞—Å—Å—ã:**
- `UserRole`: admin, manager, supervisor, operator
- `CallStatus`: incoming, answered, completed, missed
- `OperatorStatus`: online, busy, offline

#### 3. database.py - –ú–µ–Ω–µ–¥–∂–µ—Ä –ë–î
```python
class DatabaseManager:
    # –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
    - get_user_by_username(): –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - create_user(): –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    - update_system_settings(): –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    - create_operator(): –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
    - get_call_stats(): –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤
```

**–ö–æ–ª–ª–µ–∫—Ü–∏–∏ MongoDB:**
- `users`: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
- `operators`: –û–ø–µ—Ä–∞—Ç–æ—Ä—ã —Å extensions
- `groups`: –ì—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `queues`: –û—á–µ—Ä–µ–¥–∏ –∑–≤–æ–Ω–∫–æ–≤
- `calls`: –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤
- `settings`: –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### 4. auth.py - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```python
# –§—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
- create_access_token(): –°–æ–∑–¥–∞–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
- verify_password(): –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
- get_current_user(): –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- require_admin(): –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```

**–°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π:**
- **Admin**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ
- **Manager**: –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **Supervisor**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- **Operator**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤–æ–Ω–∫–æ–≤

#### 5. asterisk_client.py - Asterisk ARI
```python
class AsteriskARIClient:
    # –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
    - connect(): –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk
    - test_connection(): –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    - get_channels(): –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
    - originate_call(): –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∑–≤–æ–Ω–∫–∞
    - answer_channel(): –û—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫
    - hangup_channel(): –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞
```

#### 6. virtual_asterisk_ari.py - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π Asterisk
```python
class VirtualAsteriskARI:
    # –ò–º–∏—Ç–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π Asterisk –¥–ª—è:
    - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
    - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Asterisk
    - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
    - Extensions (1001, 1002, 1003, 2001, 2002)
    - Queues (general, support, sales)
    - Call events (StasisStart, ChannelStateChange)
```

### API –º–∞—Ä—à—Ä—É—Ç—ã

#### Auth Routes (`/api/auth/`)
- `POST /login`: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /me`: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `POST /logout`: –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã

#### Admin Routes (`/api/admin/`)
- `GET /users`: –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `POST /users`: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /users/{id}`: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /users/{id}`: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /settings`: –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `PUT /settings`: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `POST /settings/asterisk/test`: –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è Asterisk

#### Dashboard Routes (`/api/dashboard/`)
- `GET /stats`: –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /realtime`: –î–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- `GET /call-analytics`: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤
- `GET /operator-activity`: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

#### Asterisk Routes (`/api/asterisk/`)
- `GET /extensions`: –°–ø–∏—Å–æ–∫ extensions
- `GET /queues`: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—á–µ—Ä–µ–¥—è—Ö
- `GET /realtime-data`: –î–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- `POST /channels/{id}/answer`: –û—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫
- `POST /channels/{id}/hangup`: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞

---

## üé® Frontend –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
frontend/src/
‚îú‚îÄ‚îÄ components/           # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ ui/              # –ë–∞–∑–æ–≤—ã–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn/ui)
‚îÇ   ‚îú‚îÄ‚îÄ admin/           # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/       # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã dashboard
‚îÇ   ‚îú‚îÄ‚îÄ reports/         # –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ Layout.js        # –û—Å–Ω–æ–≤–Ω–æ–π –º–∞–∫–µ—Ç
‚îú‚îÄ‚îÄ context/             # React –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.js   # –ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ hooks/               # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ö—É–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ use-toast.js     # –•—É–∫ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ services/            # –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ api.js           # API –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ lib/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ utils.js         # –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ App.js              # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îî‚îÄ‚îÄ index.js            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. Layout.js - –û—Å–Ω–æ–≤–Ω–æ–π –º–∞–∫–µ—Ç
```javascript
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –ë–æ–∫–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å —Å –ø—Ä–æ—Ñ–∏–ª–µ–º
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
- Breadcrumbs –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- Responsive –¥–∏–∑–∞–π–Ω
```

**–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:**
- Dashboard: –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
- Reports: –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞  
- Operators: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
- Admin: –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

#### 2. AuthContext.js - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```javascript
// –£–ø—Ä–∞–≤–ª—è–µ—Ç:
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- JWT —Ç–æ–∫–µ–Ω –≤ localStorage
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –§—É–Ω–∫—Ü–∏–∏ login/logout
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π
```

#### 3. AdminPanel.js - –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```javascript
// –°–æ–¥–µ—Ä–∂–∏—Ç –≤–∫–ª–∞–¥–∫–∏:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã (AdminSettings)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (UserManagement)

// –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è role: "admin"
```

#### 4. AdminSettings.js - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
```javascript
// –†–∞–∑–¥–µ–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫:
- Asterisk –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

// –§—É–Ω–∫—Ü–∏–∏:
- loadSettings(): –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- saveSettings(): –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫  
- testAsteriskConnection(): –¢–µ—Å—Ç Asterisk
- testDatabaseConnection(): –¢–µ—Å—Ç –ë–î
```

#### 5. UserManagement.js - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
```javascript
// –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–≤—è–∑–∫–∞ extension –∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º

// –í–∞–ª–∏–¥–∞—Ü–∏—è:
- Extension –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å username –∏ email
- –ü—Ä–æ–≤–µ—Ä–∫–∞ extensions –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã
```

#### 6. Dashboard.js - –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
```javascript
// –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- KPI –∫–∞—Ä—Ç–æ—á–∫–∏ (–∑–≤–æ–Ω–∫–∏, –æ—Ç–≤–µ—Ç—ã, –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ)
- –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –°—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- –†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
- –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
- Responsive –≥—Ä–∞—Ñ–∏–∫–∏
```

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn/ui)

#### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `Button`: –ö–Ω–æ–ø–∫–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Å—Ç–∏–ª–µ–π
- `Input`: –ü–æ–ª—è –≤–≤–æ–¥–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- `Card`: –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `Badge`: –ë–µ–π–¥–∂–∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- `Alert`: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `Select`: –í—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏
- `Tabs`: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã–µ –≤–∫–ª–∞–¥–∫–∏

#### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `DetailedErrorDialog`: –î–µ—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å –ª–æ–≥–∞–º–∏
- `LoadingSpinner`: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏
- `ToastProvider`: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### –°–µ—Ä–≤–∏—Å—ã

#### api.js - API –∫–ª–∏–µ–Ω—Ç
```javascript
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
const api = axios.create({
  baseURL: API_BASE_URL,
  headers: { 'Content-Type': 'application/json' }
});

// –ò–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä—ã:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤

// –ì—Ä—É–ø–ø—ã –º–µ—Ç–æ–¥–æ–≤:
- authAPI: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- adminAPI: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ  
- dashboardAPI: Dashboard –¥–∞–Ω–Ω—ã–µ
- operatorAPI: –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### MongoDB –∫–æ–ª–ª–µ–∫—Ü–∏–∏

#### Users - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
```javascript
{
  id: "uuid",
  username: "string",     // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω
  email: "string",        // Email –∞–¥—Ä–µ—Å
  name: "string",         // –ü–æ–ª–Ω–æ–µ –∏–º—è
  password_hash: "string", // –•–µ—à –ø–∞—Ä–æ–ª—è (bcrypt)
  role: "enum",           // admin|manager|supervisor|operator
  group_id: "string?",    // ID –≥—Ä—É–ø–ø—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  is_active: "boolean",   // –ê–∫—Ç–∏–≤–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  created_at: "datetime",
  updated_at: "datetime"
}
```

#### Operators - –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
```javascript
{
  id: "uuid",
  user_id: "string",      // –°–≤—è–∑—å —Å Users
  extension: "string",    // –ù–æ–º–µ—Ä extension –≤ Asterisk
  group_id: "string?",    // ID –≥—Ä—É–ø–ø—ã
  status: "enum",         // online|busy|offline
  skills: ["string"],     // –ù–∞–≤—ã–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
  max_concurrent_calls: "number", // –ú–∞–∫—Å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
  current_calls: "number", // –¢–µ–∫—É—â–∏–µ –∑–≤–æ–Ω–∫–∏
  last_activity: "datetime",
  created_at: "datetime"
}
```

#### Calls - –ó–≤–æ–Ω–∫–∏
```javascript
{
  id: "uuid",
  channel_id: "string",   // ID –∫–∞–Ω–∞–ª–∞ Asterisk
  caller_number: "string", // –ù–æ–º–µ—Ä –∑–≤–æ–Ω—è—â–µ–≥–æ
  called_number: "string", // –í—ã–∑—ã–≤–∞–µ–º—ã–π –Ω–æ–º–µ—Ä
  operator_id: "string?", // ID –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (–µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω)
  queue_id: "string?",    // ID –æ—á–µ—Ä–µ–¥–∏
  status: "enum",         // incoming|answered|completed|missed
  start_time: "datetime", // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∑–≤–æ–Ω–∫–∞
  answer_time: "datetime?", // –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
  end_time: "datetime?",  // –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  duration: "number?",    // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  recording_url: "string?", // URL –∑–∞–ø–∏—Å–∏
  notes: "string?",       // –ó–∞–º–µ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
  created_at: "datetime"
}
```

#### Queues - –û—á–µ—Ä–µ–¥–∏
```javascript
{
  id: "uuid", 
  name: "string",         // –ù–∞–∑–≤–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏
  description: "string",  // –û–ø–∏—Å–∞–Ω–∏–µ
  asterisk_name: "string", // –ò–º—è –≤ Asterisk
  max_wait_time: "number", // –ú–∞–∫—Å –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è (—Å–µ–∫)
  priority: "number",     // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—á–µ—Ä–µ–¥–∏
  strategy: "string",     // –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
  members: ["string"],    // –£—á–∞—Å—Ç–Ω–∏–∫–∏ –æ—á–µ—Ä–µ–¥–∏
  is_active: "boolean",
  created_at: "datetime"
}
```

#### Settings - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
```javascript
{
  id: "uuid",
  call_recording: "boolean",      // –ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–æ–≤
  auto_answer_delay: "number",    // –ó–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–∞
  max_call_duration: "number",    // –ú–∞–∫—Å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞
  queue_timeout: "number",        // –¢–∞–π–º–∞—É—Ç –æ—á–µ—Ä–µ–¥–∏
  callback_enabled: "boolean",    // –í–∫–ª—é—á–µ–Ω –ª–∏ callback
  sms_notifications: "boolean",   // SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  email_notifications: "boolean", // Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  asterisk_config: {              // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Asterisk
    host: "string",
    port: "number", 
    username: "string",
    password: "string",
    protocol: "string",
    timeout: "number",
    enabled: "boolean"
  },
  updated_by: "string",           // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  updated_at: "datetime"
}
```

### –ò–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```javascript
// Users
db.users.createIndex({ username: 1 }, { unique: true })
db.users.createIndex({ email: 1 }, { unique: true })
db.users.createIndex({ role: 1 })

// Operators  
db.operators.createIndex({ user_id: 1 }, { unique: true })
db.operators.createIndex({ extension: 1 }, { unique: true })
db.operators.createIndex({ status: 1 })

// Calls
db.calls.createIndex({ start_time: -1 })
db.calls.createIndex({ operator_id: 1, start_time: -1 })
db.calls.createIndex({ status: 1 })
```

---

## üì° API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### POST /api/auth/login
–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "username": "admin",
  "password": "admin"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIs...",
  "token_type": "bearer", 
  "expires_in": 1440,
  "user": {
    "id": "uuid",
    "username": "admin",
    "email": "admin@callcenter.com",
    "name": "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
    "role": "admin",
    "is_active": true
  }
}
```

#### GET /api/auth/me
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer <access_token>
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "uuid",
  "username": "admin", 
  "email": "admin@callcenter.com",
  "name": "–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä",
  "role": "admin",
  "group_id": null,
  "is_active": true,
  "created_at": "2025-01-01T00:00:00Z"
}
```

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

#### GET /api/admin/users
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ admin)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `skip`: int = 0 - –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–ø–∏—Å–µ–π
- `limit`: int = 100 - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": "uuid",
    "username": "operator1",
    "email": "operator1@callcenter.com", 
    "name": "–û–ø–µ—Ä–∞—Ç–æ—Ä 1",
    "role": "operator",
    "group_id": "group_uuid",
    "is_active": true,
    "created_at": "2025-01-01T00:00:00Z"
  }
]
```

#### POST /api/admin/users
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ admin)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "username": "operator1",
  "email": "operator1@callcenter.com",
  "name": "–û–ø–µ—Ä–∞—Ç–æ—Ä 1", 
  "password": "operator123",
  "role": "operator",
  "group_id": "group_uuid",
  "extension": "1001"
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- `extension` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è role = "operator"
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è Operator record
- `extension` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º

#### GET /api/admin/settings
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ç–æ–ª—å–∫–æ admin)

**–û—Ç–≤–µ—Ç:**
```json
{
  "call_recording": true,
  "auto_answer_delay": 3,
  "max_call_duration": 3600,
  "queue_timeout": 300,
  "callback_enabled": true,
  "sms_notifications": false,
  "email_notifications": true,
  "asterisk_config": {
    "host": "demo.asterisk.com",
    "port": 8088,
    "username": "asterisk",
    "protocol": "ARI",
    "timeout": 30,
    "enabled": true
  }
}
```

#### PUT /api/admin/settings
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ (—Ç–æ–ª—å–∫–æ admin)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "call_recording": true,
  "auto_answer_delay": 3,
  "max_call_duration": 3600,
  "queue_timeout": 300,
  "callback_enabled": true,
  "sms_notifications": false,
  "email_notifications": true,
  "asterisk_config": {
    "host": "192.168.1.100",
    "port": 8088,
    "username": "callcenter_user",
    "password": "secure_password",
    "protocol": "ARI", 
    "timeout": 30,
    "enabled": true
  }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:**
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è ARI –∫–ª–∏–µ–Ω—Ç
- –ü–∞—Ä–æ–ª—å —à–∏—Ñ—Ä—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

#### POST /api/admin/settings/asterisk/test
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Asterisk (—Ç–æ–ª—å–∫–æ admin)

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "host": "192.168.1.100",
  "port": 8088,
  "username": "callcenter_user", 
  "password": "secure_password",
  "protocol": "ARI",
  "timeout": 30
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ:**
```json
{
  "success": true,
  "message": "–£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk 18.20.0",
  "data": {
    "asterisk_version": "18.20.0",
    "system": "Local Asterisk Server",
    "connection_details": {
      "host": "192.168.1.100",
      "port": 8088,
      "protocol": "ARI",
      "status": "Connected"
    }
  }
}
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ:**
```json
{
  "success": false,
  "message": "Connection timeout: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ 192.168.1.100:8088",
  "data": {
    "error": "Connection timeout",
    "details": {
      "host": "192.168.1.100",
      "port": 8088,
      "possible_causes": [
        "Asterisk —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω",
        "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—Ç",
        "–ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ"
      ]
    },
    "troubleshooting": [
      "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Asterisk —Å–µ—Ä–≤–µ—Ä–∞",
      "–£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö",
      "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞"
    ]
  }
}
```

### Dashboard

#### GET /api/dashboard/stats
–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è dashboard

**–û—Ç–≤–µ—Ç:**
```json
{
  "total_calls_today": 156,
  "answered_calls_today": 142,
  "missed_calls_today": 14,
  "average_wait_time": 45,
  "service_level": 91.2,
  "active_operators": 8,
  "total_operators": 12,
  "busiest_hour": "14:00",
  "call_trends": [
    {"hour": "09:00", "calls": 23},
    {"hour": "10:00", "calls": 31}
  ]
}
```

#### GET /api/dashboard/realtime
–î–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

**–û—Ç–≤–µ—Ç:**
```json
{
  "active_calls": 5,
  "queue_waiting": 2,
  "operators_online": 8,
  "operators_busy": 3,
  "current_hour_calls": 45,
  "timestamp": "2025-01-01T14:30:00Z"
}
```

### Asterisk –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### GET /api/asterisk/extensions
–°–ø–∏—Å–æ–∫ extensions –∏–∑ Asterisk

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "extension": "1001",
    "technology": "PJSIP",
    "state": "NOT_INUSE",
    "contact_status": "Created",
    "contact_uri": "sip:1001@192.168.1.101:5060",
    "last_seen": "2025-01-01T14:30:00Z"
  }
]
```

#### GET /api/asterisk/queues
–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—á–µ—Ä–µ–¥—è—Ö Asterisk

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "name": "general",
    "strategy": "ringall",
    "members_count": 3,
    "completed_calls": 156,
    "abandoned_calls": 8,
    "service_level": 92,
    "hold_time": 45,
    "talk_time": 235,
    "active_calls": 2,
    "members": [
      {
        "interface": "SIP/1001",
        "status": 1,
        "paused": false,
        "calls_taken": 45,
        "last_call": 1704110400
      }
    ]
  }
]
```

#### GET /api/asterisk/realtime-data
–î–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç Asterisk

**–û—Ç–≤–µ—Ç:**
```json
{
  "connected": true,
  "asterisk_version": "18.20.0 (Virtual)",
  "active_channels": 5,
  "active_calls": 3,
  "extensions": [
    {
      "name": "PJSIP/1001",
      "state": "NOT_INUSE",
      "class": "SIP"
    }
  ],
  "channels": [
    {
      "id": "channel-12345",
      "name": "PJSIP/79001234567-00000001",
      "state": "Up",
      "caller_number": "+79001234567",
      "duration": "00:03:45"
    }
  ],
  "timestamp": "2025-01-01T14:30:00Z"
}
```

---

## ‚òéÔ∏è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Asterisk

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```mermaid
graph TB
    A[Smart Call Center] --> B[Asterisk ARI Client]
    B --> C[Asterisk REST Interface]
    B --> D[WebSocket Events]
    C --> E[Asterisk PBX]
    D --> E
    
    B --> F[Virtual Asterisk ARI]
    F --> G[Simulated Data]
    
    subgraph "Real Asterisk"
        C
        D  
        E
    end
    
    subgraph "Testing/Demo"
        F
        G
    end
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Asterisk ARI

#### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ari.conf
```ini
[general]
enabled = yes
bindaddr = 0.0.0.0
bindport = 8088
allowmultiplelogin = yes

[callcenter]
type = user
read_only = no
password = secure_password123
```

#### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è http.conf
```ini
[general]
enabled = yes
bindaddr = 0.0.0.0
bindport = 8088
```

#### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è extensions.conf
```ini
[stasis-app]
exten => _X.,1,NoOp(Incoming call from ${CALLERID(num)})
 same => n,Stasis(smart-call-center,${EXTEN})
 same => n,Hangup()

[internal]
; Internal extensions
exten => 1001,1,Dial(PJSIP/1001,30)
exten => 1002,1,Dial(PJSIP/1002,30)
exten => 1003,1,Dial(PJSIP/1003,30)
```

### ARI Client —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk
```python
class AsteriskARIClient:
    def __init__(self, host, port, username, password):
        self.host = host
        self.port = port
        self.username = username
        self.password = password
        self.base_url = f"http://{host}:{port}/ari"
        self.ws_url = f"ws://{host}:{port}/ari/events"
        
    async def connect(self):
        # HTTP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è REST API
        auth = aiohttp.BasicAuth(self.username, self.password)
        self.session = aiohttp.ClientSession(auth=auth)
        
        # WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è —Å–æ–±—ã—Ç–∏–π
        headers = {
            "Authorization": f"Basic {base64.b64encode(f'{self.username}:{self.password}'.encode()).decode()}"
        }
        self.ws = await websockets.connect(
            f"{self.ws_url}?app=smart-call-center",
            extra_headers=headers
        )
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
```python
async def handle_events(self):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π Asterisk –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"""
    async for message in self.ws:
        event = json.loads(message)
        
        if event["type"] == "StasisStart":
            # –ù–æ–≤—ã–π –∑–≤–æ–Ω–æ–∫ –ø–æ—Å—Ç—É–ø–∏–ª –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            await self.handle_incoming_call(event)
            
        elif event["type"] == "ChannelStateChange":
            # –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–∞
            await self.handle_channel_state_change(event)
            
        elif event["type"] == "StasisEnd":
            # –ó–≤–æ–Ω–æ–∫ –ø–æ–∫–∏–Ω—É–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            await self.handle_call_end(event)
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏
```python
async def answer_channel(self, channel_id: str):
    """–û—Ç–≤–µ—Ç –Ω–∞ –∑–≤–æ–Ω–æ–∫"""
    async with self.session.post(
        f"{self.base_url}/channels/{channel_id}/answer"
    ) as resp:
        return resp.status == 204

async def hangup_channel(self, channel_id: str):
    """–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞"""
    async with self.session.delete(
        f"{self.base_url}/channels/{channel_id}"
    ) as resp:
        return resp.status == 204

async def originate_call(self, endpoint: str, context: str = "internal"):
    """–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –∏—Å—Ö–æ–¥—è—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞"""
    data = {
        "endpoint": endpoint,
        "context": context,
        "priority": 1,
        "app": "smart-call-center"
    }
    async with self.session.post(
        f"{self.base_url}/channels",
        json=data
    ) as resp:
        return await resp.json()
```

### –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π Asterisk ARI

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Asterisk –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

#### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Virtual ARI
- **–ò–º–∏—Ç–∞—Ü–∏—è extensions**: 1001, 1002, 1003, 2001, 2002
- **–ò–º–∏—Ç–∞—Ü–∏—è –æ—á–µ—Ä–µ–¥–µ–π**: general, support, sales  
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –∑–≤–æ–Ω–∫–æ–≤**: StasisStart, ChannelStateChange, StasisEnd
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Å–æ—Å—Ç–æ—è–Ω–∏—è, –º–µ—Ç—Ä–∏–∫–∏
- **–°—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫**: –¢–∞–π–º–∞—É—Ç—ã, –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

#### –ê–∫—Ç–∏–≤–∞—Ü–∏—è Virtual ARI
Virtual ARI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ö–æ—Å—Ç–æ–≤:
- `demo.asterisk.com`
- `test.asterisk.local`  
- `virtual.ari`
- `localhost` (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö)

#### –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Asterisk
–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É Asterisk:
1. –í –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ —É–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π IP/hostname
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ARI

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Node.js**: 16+ (–¥–ª—è frontend)
- **Python**: 3.8+ (–¥–ª—è backend)
- **MongoDB**: 4.4+ (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- **Docker**: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏

#### –®–∞–≥–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/PewPewSlowMo/SmartCallCenter.git
cd SmartCallCenter
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend**
```bash
cd backend
pip install -r requirements.txt

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cat > .env << EOF
MONGO_URL=mongodb://localhost:27017
DB_NAME=callcenter
JWT_SECRET_KEY=your-secret-key-here
EOF
```

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend**
```bash
cd frontend
yarn install

# –°–æ–∑–¥–∞–Ω–∏–µ .env.local —Ñ–∞–π–ª–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
cat > .env.local << EOF
REACT_APP_BACKEND_URL=http://localhost:8001
WDS_SOCKET_PORT=3000
EOF
```

4. **–ó–∞–ø—É—Å–∫ MongoDB**
```bash
# Linux/macOS
sudo systemctl start mongod

# Windows
net start MongoDB

# Docker
docker run -d -p 27017:27017 --name mongodb mongo:latest
```

5. **–ó–∞–ø—É—Å–∫ Backend**
```bash
cd backend
uvicorn server:app --host 0.0.0.0 --port 8001 --reload
```

6. **–ó–∞–ø—É—Å–∫ Frontend**
```bash
cd frontend
yarn start
```

7. **–î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost:3000
- –õ–æ–≥–∏–Ω: admin / admin

### Docker —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### docker-compose.yml
```yaml
version: '3.8'

services:
  mongodb:
    image: mongo:latest
    container_name: callcenter_mongodb
    restart: unless-stopped
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
    environment:
      MONGO_INITDB_DATABASE: callcenter

  backend:
    build: ./backend
    container_name: callcenter_backend
    restart: unless-stopped
    ports:
      - "8001:8001"
    environment:
      MONGO_URL: mongodb://mongodb:27017
      DB_NAME: callcenter
      JWT_SECRET_KEY: your-secret-key-here
    depends_on:
      - mongodb
    volumes:
      - ./backend:/app

  frontend:
    build: ./frontend
    container_name: callcenter_frontend
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      REACT_APP_BACKEND_URL: http://localhost:8001
    depends_on:
      - backend
    volumes:
      - ./frontend:/app

volumes:
  mongodb_data:
```

#### –ö–æ–º–∞–Ω–¥—ã Docker
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose up --build
```

### –ü—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```nginx
server {
    listen 80;
    server_name your-domain.com;

    # Frontend
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # Backend API
    location /api/ {
        proxy_pass http://localhost:8001;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

#### Systemd —Å–µ—Ä–≤–∏—Å—ã

**Backend —Å–µ—Ä–≤–∏—Å** (`/etc/systemd/system/callcenter-backend.service`):
```ini
[Unit]
Description=Smart Call Center Backend
After=network.target

[Service]
Type=simple
User=callcenter
WorkingDirectory=/opt/callcenter/backend
Environment=PATH=/opt/callcenter/venv/bin
ExecStart=/opt/callcenter/venv/bin/uvicorn server:app --host 0.0.0.0 --port 8001
Restart=always

[Install]
WantedBy=multi-user.target
```

**Frontend —Å–µ—Ä–≤–∏—Å** (`/etc/systemd/system/callcenter-frontend.service`):
```ini
[Unit]
Description=Smart Call Center Frontend
After=network.target

[Service]
Type=simple
User=callcenter
WorkingDirectory=/opt/callcenter/frontend
ExecStart=/usr/bin/yarn start
Restart=always

[Install]
WantedBy=multi-user.target
```

#### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
sudo apt install certbot python3-certbot-nginx

# –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
sudo crontab -e
# –î–æ–±–∞–≤–∏—Ç—å: 0 12 * * * /usr/bin/certbot renew --quiet
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

#### JWT —Ç–æ–∫–µ–Ω—ã
- **–ê–ª–≥–æ—Ä–∏—Ç–º**: HS256
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏**: 24 —á–∞—Å–∞ (1440 –º–∏–Ω—É—Ç)
- **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á**: –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ –ø–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è

#### –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
```python
@router.get("/admin/users")
async def get_users(current_user: User = Depends(require_admin)):
    # –î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è role = "admin"
    pass

@router.get("/supervisor/reports") 
async def get_reports(current_user: User = Depends(require_supervisor)):
    # –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è role in ["admin", "manager", "supervisor"]
    pass
```

#### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
```python
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è bcrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")

def get_password_hash(password: str) -> str:
    return pwd_context.hash(password)

def verify_password(plain_password: str, hashed_password: str) -> bool:
    return pwd_context.verify(plain_password, hashed_password)
```

### –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

#### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π Asterisk
```python
# –ü–∞—Ä–æ–ª–∏ Asterisk —à–∏—Ñ—Ä—É—é—Ç—Å—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ –ë–î
from cryptography.fernet import Fernet

def encrypt_password(password: str, key: bytes) -> str:
    f = Fernet(key)
    return f.encrypt(password.encode()).decode()

def decrypt_password(encrypted_password: str, key: bytes) -> str:
    f = Fernet(key)
    return f.decrypt(encrypted_password.encode()).decode()
```

#### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```python
# –í—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Pydantic
class UserCreate(BaseModel):
    username: str = Field(..., min_length=3, max_length=50)
    email: EmailStr
    name: str = Field(..., min_length=1, max_length=100)
    password: str = Field(..., min_length=6)
    role: UserRole
    extension: Optional[str] = Field(None, regex=r"^\d{3,5}$")
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API

#### CORS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```python
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
app.add_middleware(
    CORSMiddleware,
    allow_origins=["https://your-domain.com"],  # –¢–æ–ª—å–∫–æ –≤–∞—à –¥–æ–º–µ–Ω
    allow_credentials=True,
    allow_methods=["GET", "POST", "PUT", "DELETE"],
    allow_headers=["*"],
)
```

#### Rate Limiting
```python
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

@app.post("/api/auth/login")
@limiter.limit("5/minute")  # –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞ –≤ –º–∏–Ω—É—Ç—É
async def login(request: Request, user_credentials: UserLogin):
    pass
```

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```python
import logging

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
logger.info(f"Login attempt: {username} from {remote_ip}")
logger.warning(f"Failed login: {username} from {remote_ip}")
logger.error(f"Blocked login: {username} from {remote_ip} (too many attempts)")
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å Asterisk

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ ARI
```ini
# ari.conf - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
[general]
enabled = yes
bindaddr = 127.0.0.1  # –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
allowmultiplelogin = no

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
[callcenter_readonly]
type = user
read_only = yes
password = secure_readonly_password

[callcenter_operator]
type = user
read_only = no
password = secure_operator_password
```

#### Firewall –ø—Ä–∞–≤–∏–ª–∞
```bash
# –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ Asterisk ARI
sudo ufw allow from 192.168.1.0/24 to any port 8088
sudo ufw deny 8088
```

---

## üë• –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ)
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Asterisk
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏ –∏ –æ—á–µ—Ä–µ–¥—è–º–∏
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

**–ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥:**
1. –õ–æ–≥–∏–Ω: `admin`
2. –ü–∞—Ä–æ–ª—å: `admin`
3. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞

#### –ú–µ–Ω–µ–¥–∂–µ—Ä (manager)
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—Ç—á–µ—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ Dashboard —Å –ø–æ–ª–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ CSV/PDF
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚ùå –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –°—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä (supervisor)  
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤ —Å–≤–æ–µ–π –≥—Ä—É–ø–ø—ã
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≥—Ä—É–ø–ø—ã
- ‚úÖ Dashboard –≥—Ä—É–ø–ø—ã
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤–æ–Ω–∫–∞–º–∏ –≥—Ä—É–ø–ø—ã
- ‚ùå –û–±—â–µ—Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### –û–ø–µ—Ä–∞—Ç–æ—Ä (operator)
**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ –õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–≤–æ–∏—Ö –∑–≤–æ–Ω–∫–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º (–¥–æ—Å—Ç—É–ø–µ–Ω/–∑–∞–Ω—è—Ç)
- ‚ùå –ü—Ä–æ—Å–º–æ—Ç—Ä –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚ùå –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∏—Å—Ç–µ–º—ã

#### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard)

**–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤:**
- **KPI –∫–∞—Ä—Ç–æ—á–∫–∏**: –û–±—â–∏–µ –∑–≤–æ–Ω–∫–∏, –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ, –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ, –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
- **–ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**: –ü–æ—á–∞—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–≤–æ–Ω–∫–æ–≤
- **–°—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤**: –û–Ω–ª–∞–π–Ω, –∑–∞–Ω—è—Ç, –æ—Ñ–ª–∞–π–Ω
- **–û—á–µ—Ä–µ–¥–∏**: –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—è—Ö
- **–¢—Ä–µ–Ω–¥—ã**: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ –ø–µ—Ä–∏–æ–¥–∞–º–∏

**–î–ª—è —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–æ–≤:**
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã**: KPI —Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–π –≥—Ä—É–ø–ø—ã
- **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã –≥—Ä—É–ø–ø—ã**: –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö
- **–ó–≤–æ–Ω–∫–∏ –≥—Ä—É–ø–ø—ã**: –ò—Å—Ç–æ—Ä–∏—è –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–≤–æ–Ω–∫–∏

**–î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤:**
- **–õ–∏—á–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ü—Ä–∏–Ω—è—Ç—ã–µ/–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏
- **–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: –î–æ—Å—Ç—É–ø–µ–Ω/–ó–∞–Ω—è—Ç/–û—Ñ–ª–∞–π–Ω
- **–ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤**: –õ–∏—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∑–∞ –ø–µ—Ä–∏–æ–¥
- **–¶–µ–ª–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏**: –õ–∏—á–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### –†–∞–∑–¥–µ–ª "–û—Ç—á–µ—Ç—ã"

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ—Ç—á–µ—Ç—ã:**
1. **–û—Ç—á–µ—Ç –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º**
   - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
   - –í—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞, –ø–∞—É–∑—ã, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–Ω—è—Ç—ã—Ö/–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤

2. **–û—Ç—á–µ—Ç –ø–æ –æ—á–µ—Ä–µ–¥—è–º**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–∂–¥–æ–π –æ—á–µ—Ä–µ–¥–∏
   - –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è, –ø—Ä–æ—Ü–µ–Ω—Ç –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
   - –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã –∏ –Ω–∞–≥—Ä—É–∑–∫–∞

3. **–û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º –∑–≤–æ–Ω–∫–∞–º**
   - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
   - –ü—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–ø—É—Å–∫–∞
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

4. **–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –∑–≤–æ–Ω–∫–∞–º**
   - –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º, –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º, –Ω–æ–º–µ—Ä–∞–º
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö

**–§–∏–ª—å—Ç—Ä—ã –æ—Ç—á–µ—Ç–æ–≤:**
- **–ü–µ—Ä–∏–æ–¥**: –°–µ–≥–æ–¥–Ω—è, –≤—á–µ—Ä–∞, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π
- **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã**: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏–ª–∏ –≥—Ä—É–ø–ø—ã
- **–û—á–µ—Ä–µ–¥–∏**: –§–∏–ª—å—Ç—Ä –ø–æ –æ—á–µ—Ä–µ–¥—è–º
- **–°—Ç–∞—Ç—É—Å –∑–≤–æ–Ω–∫–æ–≤**: –û—Ç–≤–µ—á–µ–Ω–Ω—ã–µ, –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ, –≤—Å–µ

#### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**
1. **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
   - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º –∏ —Å—Ç–∞—Ç—É—Å—É
   - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/email

2. **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
   - –í—ã–±–æ—Ä —Ä–æ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã
   - –î–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤: –ø—Ä–∏–≤—è–∑–∫–∞ extension
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è

3. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –°–º–µ–Ω–∞ —Ä–æ–ª–∏ –∏ –≥—Ä—É–ø–ø—ã
   - –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è/–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
   - –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

**–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
1. **–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**
   - –ó–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–æ–≤ (–≤–∫–ª/–≤—ã–∫–ª)
   - –ó–∞–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–∞
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞
   - –¢–∞–π–º–∞—É—Ç –æ—á–µ—Ä–µ–¥–∏

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Asterisk**
   - IP –∞–¥—Ä–µ—Å/hostname —Å–µ—Ä–≤–µ—Ä–∞ Asterisk
   - –ü–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ–±—ã—á–Ω–æ 8088)
   - –£—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ARI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
   - Callback —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)

1. **–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
   ```
   1. –í–æ–π—Ç–∏ –∫–∞–∫ admin/admin
   2. –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   3. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã
   4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Asterisk:
      - Host: IP –∞–¥—Ä–µ—Å Asterisk —Å–µ—Ä–≤–µ—Ä–∞
      - Port: 8088 (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π ARI –ø–æ—Ä—Ç)
      - Username: ARI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
      - Password: –ü–∞—Ä–æ–ª—å ARI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
   6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤**
   ```
   1. –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å ‚Üí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
   2. –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
   3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É:
      - Username: operator1
      - Email: operator1@company.com
      - Name: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
      - Password: –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å
      - Role: –û–ø–µ—Ä–∞—Ç–æ—Ä
      - Extension: 1001
   4. –°–æ–∑–¥–∞—Ç—å
   5. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
   ```

3. **–°–æ–∑–¥–∞–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤ –∏ —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–æ–≤**
   ```
   1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é "–ú–µ–Ω–µ–¥–∂–µ—Ä"
   2. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é "–°—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä"
   3. –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä—É –≥—Ä—É–ø–ø—É
   4. –ù–∞–∑–Ω–∞—á–∏—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≤ –≥—Ä—É–ø–ø—É —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä–∞
   ```

#### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–≤–æ–Ω–∫–æ–≤ (–º–µ–Ω–µ–¥–∂–µ—Ä)

1. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**
   ```
   1. –û—Ç–∫—Ä—ã—Ç—å Dashboard
   2. –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:
      - –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–≤–æ–Ω–∫–∏
      - –û–ø–µ—Ä–∞—Ç–æ—Ä—ã –æ–Ω–ª–∞–π–Ω/–∑–∞–Ω—è—Ç
      - –ó–≤–æ–Ω–∫–∏ –≤ –æ—á–µ—Ä–µ–¥–∏
   3. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã –∏ –ø–∏–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
   ```

2. **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   ```
   1. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "–û—Ç—á–µ—Ç—ã"
   2. –í—ã–±—Ä–∞—Ç—å "–û—Ç—á–µ—Ç –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º"
   3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–¥–µ–ª—è)
   4. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:
      - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
      - –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
      - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
   5. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç –¥–ª—è —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞
   ```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π (—Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä)

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥—Ä—É–ø–ø—ã**
   ```
   1. –û—Ç–∫—Ä—ã—Ç—å Dashboard
   2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≥—Ä—É–ø–ø—ã
   3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –≥—Ä—É–ø–ø—ã
   4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏
   ```

2. **–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤**
   ```
   1. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–û—Ç—á–µ—Ç—ã" ‚Üí "–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏"
   2. –§–∏–ª—å—Ç—Ä –ø–æ —Å–≤–æ–µ–π –≥—Ä—É–ø–ø–µ
   3. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–ø—É—Å–∫–æ–≤
   4. –ü—Ä–∏–Ω–∏–º–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—â–∏–µ –º–µ—Ä—ã
   ```

#### –†–∞–±–æ—Ç–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞

1. **–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—á–µ–≥–æ –¥–Ω—è**
   ```
   1. –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É —Å–æ —Å–≤–æ–∏–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏—á–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
   3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å "–î–æ—Å—Ç—É–ø–µ–Ω"
   4. –ë—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º –∫ –ø—Ä–∏–µ–º—É –∑–≤–æ–Ω–∫–æ–≤
   ```

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–≤–æ–Ω–∫–æ–≤**
   ```
   1. –ü—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –∑–≤–æ–Ω–∫–∞:
      - –°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–≤–æ–Ω—è—â–µ–º
      - –ù–∞–∂–∞—Ç—å "–û—Ç–≤–µ—Ç–∏—Ç—å" –∏–ª–∏ —Å–Ω—è—Ç—å —Ç—Ä—É–±–∫—É
   2. –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–≤–æ–Ω–∫–∞:
      - –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
      - –í—ã–±—Ä–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–≤–æ–Ω–∫–∞
      - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–≤–æ–Ω–∫–∞
   ```

3. **–ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**
   ```
   1. –û—Ç–∫—Ä—ã—Ç—å Dashboard
   2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
      - –ü—Ä–∏–Ω—è—Ç—ã–µ –∑–≤–æ–Ω–∫–∏ –∑–∞ –¥–µ–Ω—å
      - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
      - –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
   3. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   ```

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ Asterisk

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –∑–≤–æ–Ω–∫–∞—Ö
- Extensions –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Asterisk**
   ```bash
   ping IP_ASTERISK_SERVER
   telnet IP_ASTERISK_SERVER 8088
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ARI**
   ```ini
   # /etc/asterisk/ari.conf
   [general]
   enabled = yes
   bindaddr = 0.0.0.0
   bindport = 8088
   
   [callcenter_user]
   type = user
   read_only = no
   password = –≤–∞—à_–ø–∞—Ä–æ–ª—å
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Asterisk**
   ```bash
   sudo systemctl restart asterisk
   ```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ "Incorrect username or password"
- –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ
- –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç–∞

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–ª–∏**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏–∏

3. **–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å**
   - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- –ó–∞–¥–µ—Ä–∂–∫–∏ –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –û—à–∏–±–∫–∏ —Ç–∞–π–º–∞—É—Ç–∞

**–†–µ—à–µ–Ω–∏—è:**
1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞**
   ```bash
   htop  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CPU –∏ RAM
   df -h # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î**
   ```bash
   mongo --host localhost:27017
   # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å MongoDB
   ```

3. **–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏**
   ```bash
   # –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞
   sudo find /var/log -name "*.log" -mtime +30 -delete
   ```

4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
   ```javascript
   // –í MongoDB
   db.calls.createIndex({ "start_time": -1 })
   db.calls.createIndex({ "operator_id": 1, "start_time": -1 })
   ```

---

## üìö –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### A. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Backend (.env)
```bash
# Database
MONGO_URL=mongodb://localhost:27017
DB_NAME=callcenter

# Security
JWT_SECRET_KEY=your-super-secret-jwt-key-here
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Asterisk (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ UI)
ASTERISK_HOST=192.168.1.100
ASTERISK_PORT=8088
ASTERISK_USERNAME=callcenter_user
ASTERISK_PASSWORD=secure_password

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
```

#### Frontend (.env.local)
```bash
# Backend URL
REACT_APP_BACKEND_URL=http://localhost:8001

# Development
WDS_SOCKET_PORT=3000
FAST_REFRESH=true

# Build optimization
GENERATE_SOURCEMAP=false
```

### B. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –ö–æ–ª–ª–µ–∫—Ü–∏–∏ MongoDB
```javascript
// –†–∞–∑–º–µ—Ä—ã –∫–æ–ª–ª–µ–∫—Ü–∏–π (–ø—Ä–∏–º–µ—Ä–Ω—ã–µ)
db.users.totalSize()        // ~10KB (–¥–æ 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
db.operators.totalSize()    // ~5KB (–¥–æ 50 –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)  
db.calls.totalSize()        // ~100MB+ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä–µ–º–∞ –∑–≤–æ–Ω–∫–æ–≤)
db.groups.totalSize()       // ~2KB (–¥–æ 10 –≥—Ä—É–ø–ø)
db.queues.totalSize()       // ~5KB (–¥–æ 20 –æ—á–µ—Ä–µ–¥–µ–π)
db.settings.totalSize()     // ~1KB (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
```

#### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```javascript
// –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã
db.users.createIndex({ "username": 1 }, { unique: true })
db.users.createIndex({ "email": 1 }, { unique: true })
db.operators.createIndex({ "extension": 1 }, { unique: true })
db.calls.createIndex({ "start_time": -1 })
db.calls.createIndex({ "operator_id": 1, "start_time": -1 })
db.calls.createIndex({ "status": 1 })

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
db.calls.createIndex({ "queue_id": 1, "start_time": -1 })
db.calls.createIndex({ "caller_number": 1 })
db.operators.createIndex({ "group_id": 1 })
```

### C. API –∫–æ–¥—ã –æ—à–∏–±–æ–∫

#### HTTP —Å—Ç–∞—Ç—É—Å—ã
- **200 OK**: –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **201 Created**: –†–µ—Å—É—Ä—Å —Å–æ–∑–¥–∞–Ω
- **400 Bad Request**: –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **401 Unauthorized**: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
- **403 Forbidden**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤
- **404 Not Found**: –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω
- **422 Unprocessable Entity**: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **500 Internal Server Error**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

#### –ö–æ–¥—ã –æ—à–∏–±–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```python
# –ö–æ–¥—ã –æ—à–∏–±–æ–∫ Smart Call Center
AUTH_001 = "Invalid credentials"
AUTH_002 = "Token expired"
AUTH_003 = "Insufficient permissions"

USER_001 = "Username already exists"
USER_002 = "Email already exists"
USER_003 = "Extension already assigned"

ASTERISK_001 = "Connection timeout"
ASTERISK_002 = "Authentication failed"
ASTERISK_003 = "Invalid configuration"

DB_001 = "Database connection failed"
DB_002 = "Record not found"
DB_003 = "Validation error"
```

### D. –õ–∏—Ü–µ–Ω–∑–∏—è

```
MIT License

Copyright (c) 2025 Smart Call Center

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
```

---

**Smart Call Center v1.0**  
*–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ì–æ—Å–ø–∏—Ç–∞–ª—è*  
*¬© 2025 Denis*